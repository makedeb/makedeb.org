<header>
	{{ if hasPrefix .RelPermalink "/news" }}
	<a class="makedeb-brand" href="/news">
	{{ else }}
	<a class="makedeb-brand" href="/">
	{{ end }}
		<img class="makedeb-logo" src="/media/makedeb-logo.svg" alt="makedeb logo">
		<p class="makedeb-logo-text">makedeb</p>
	</a>
	
	<div class="links">
		{{ if eq .RelPermalink "/" }}
		<p>Homepage</p>
		{{ else }}
		<a href="/">Homepage</a>
		{{ end }}

		<a href="https://docs.{{ .Site.Params.makedeb_url }}">Docs</a>
		<a href="https://mpr.{{ .Site.Params.hw_url }}">MPR</a>

		{{ if eq .RelPermalink "/news/" }}
		<p>News</p>
		{{ else }}
		<a href="/news">News</a>
		{{ end }}

		{{ if eq .RelPermalink "/donate/" }}
		<p>Donate</p>
		{{ else }}
		<a href="/donate">Donate</a>
		<button class="toggle-btn" id="toggle-theme-button">
			<img id="sun-icon" class="icon" src="/media/theme-button/sun_icon.svg"/>
			<img id="moon-icon" class="icon" src="/media/theme-button/moon_icon.svg"/>
		</button>
		{{ end }}
	</div>
</header>
<hr class="header-hr">

<script>
	initialThemeLoad()

	const toggleThemeBtn = document.getElementById("toggle-theme-button")
	toggleThemeBtn?.addEventListener("click",function(){
		const body = document.body
		if (body.className=="dark")
		{
			setBodyClass("")
			toggleThemeBtn?.classList.remove("active")
			changeBtnIcon("moon")
			localStorage.removeItem("theme")
		}
		else {
			toggleThemeBtn?.classList.add("active")
			changeBtnIcon("sun")
			localStorage.setItem("theme", "dark")
			setBodyClass("dark")
		}
	})

	/**
	 * Makes nessesary changes for initial theme load
	*/
	function initialThemeLoad(){
	const toggleThemeBtn = document.getElementById("toggle-theme-button")
	const theme = localStorage.getItem("theme")
		if (theme == "dark") {
			setBodyClass("dark")
			changeBtnIcon("sun")
			toggleThemeBtn?.classList.add("active")
		} else changeBtnIcon("moon")
	}

	/**
	 * Changes the body class
	 * @param {string} className - class name to be set
	*/
	function setBodyClass(className){
		const body = document.body
		body.className = className
	}

	/**
	 * Changes theme toggle button's icon
	 * @param {"sun" | "moon"} iconType - icon type to be displayed
	*/
	function changeBtnIcon(iconType){
		const sunIcon = document.getElementById("sun-icon")
		const moonIcon = document.getElementById("moon-icon")
		if (iconType == "sun"){
			moonIcon?.classList.remove("active-icon")
			sunIcon?.classList.add("active-icon")
		}
		if (iconType == "moon"){
			sunIcon?.classList.remove("active-icon")
			moonIcon?.classList.add("active-icon")
		}
	}
</script>
